(this["webpackJsonpchess-frontend"]=this["webpackJsonpchess-frontend"]||[]).push([[0],[,,function(e,t,a){e.exports=a.p+"static/media/capture-move.a2b149c4.mp3"},,,function(e,t,a){},,,function(e,t,a){e.exports=a.p+"static/media/normal-move.d9502a4d.mp3"},function(e,t,a){e.exports=a.p+"static/media/wrong.9ee53a8d.mp3"},,function(e,t,a){e.exports=a(28)},,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),l=a.n(c);a(20);var o={TIMER_DURATION:300,THEME:"classic",ENABLE_SOUND:!0,IS_FLIPPED:!1,THEME_KEY:"theme",ENABLE_SOUND_KEY:"enableSound",TIMER_DURATION_KEY:"timerDuration",IS_FLIPPED_KEY:"isFlipped",CHESS_GAME_KEY:"chessGame"};const s=Object(n.createContext)(),i=e=>{let{children:t}=e;const a=(e,t)=>{const a=localStorage.getItem(e);return null!==a?JSON.parse(a):t},[c,l]=Object(n.useState)(()=>a(o.THEME_KEY,o.THEME)),[i,m]=Object(n.useState)(()=>a(o.ENABLE_SOUND_KEY,o.ENABLE_SOUND)),[u,E]=Object(n.useState)(()=>a(o.TIMER_DURATION_KEY,o.TIMER_DURATION)),[d,v]=Object(n.useState)(()=>a(o.IS_FLIPPED_KEY,o.IS_FLIPPED));return Object(n.useEffect)(()=>localStorage.setItem(o.THEME_KEY,JSON.stringify(c)),[c]),Object(n.useEffect)(()=>localStorage.setItem(o.ENABLE_SOUND_KEY,JSON.stringify(i)),[i]),Object(n.useEffect)(()=>localStorage.setItem(o.TIMER_DURATION_KEY,JSON.stringify(u)),[u]),Object(n.useEffect)(()=>localStorage.setItem(o.IS_FLIPPED_KEY,JSON.stringify(d)),[d]),r.a.createElement(s.Provider,{value:{theme:c,setTheme:l,enableSound:i,setEnableSound:m,timerDuration:u,setTimerDuration:E,isFlipped:d,setIsFlipped:v}},t)};var m=a(7);a(21);var u=e=>{let{whiteTime:t,blackTime:a,isWhiteTurn:n,isFlipped:c}=e;return r.a.createElement("div",{className:"left-panel"},r.a.createElement("div",{className:"clocks-container"},c?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"clock "+(n?"active-turn":"")},"\u26aa ",t),r.a.createElement("div",{className:"clock "+(n?"":"active-turn")},"\u26ab ",a)):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"clock "+(n?"":"active-turn")},"\u26ab ",a),r.a.createElement("div",{className:"clock "+(n?"active-turn":"")},"\u26aa ",t))))};a(22);var E=e=>{let{moveHistory:t}=e;const a=Object(n.useRef)(null);return Object(n.useEffect)(()=>{a.current&&(a.current.scrollTop=a.current.scrollHeight)},[t]),r.a.createElement("div",{className:"move-history"},r.a.createElement("h3",null,"Move History"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"White"),r.a.createElement("th",null,"Black"))),r.a.createElement("tbody",{ref:a}," ",t.map((e,a)=>a%2===0?r.a.createElement("tr",{key:a/2},r.a.createElement("td",null,Math.floor(a/2)+1,"."),r.a.createElement("td",null,e),r.a.createElement("td",null,t[a+1]||"")," "):null))))};var d=a(8),v=a.n(d),b=a(2),p=a.n(b),f=a(9),S=a.n(f);var h=e=>{let t;switch(e){case"move":t=new Audio(v.a);break;case"capture":case"check":case"checkmate":t=new Audio(p.a);break;case"wrong":t=new Audio(S.a);break;default:return}t.play()},N=a(10);a(24);var O=e=>{let{position:t,handleMove:a,lastMove:n,isFlipped:c}=e;return r.a.createElement("div",{className:"chess-board"},r.a.createElement(N.a,{position:t,onPieceDrop:(e,t)=>a({from:e,to:t}),boardOrientation:c?"black":"white",customSquareStyles:n?{[n.from]:{backgroundColor:"var(--last-move-from)"},[n.to]:{backgroundColor:"var(--last-move-to)"}}:{},customDarkSquareStyle:{backgroundColor:"var(--dark-square)"},customLightSquareStyle:{backgroundColor:"var(--light-square)"}}))};a(5),a(25);var g=e=>{let{theme:t,setTheme:a,enableSound:c,setEnableSound:l}=e;const[o,s]=Object(n.useState)(!1),i=Object(n.useRef)(null);return Object(n.useEffect)(()=>{const e=e=>{i.current&&!i.current.contains(e.target)&&s(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),r.a.createElement("div",{className:"settings-container",ref:i},r.a.createElement("button",{className:"settings-button",onClick:()=>s(e=>!e)},"\u2699 Settings"),o&&r.a.createElement("div",{className:"settings-dropdown"},r.a.createElement("div",{className:"dropdown-item"},r.a.createElement("h4",null,"Theme:"),r.a.createElement("select",{onChange:e=>a(e.target.value),value:t},r.a.createElement("option",{value:"default"},"Default"),r.a.createElement("option",{value:"classic"},"Classic"),r.a.createElement("option",{value:"wood"},"Wood"),r.a.createElement("option",{value:"marble"},"Marble"),r.a.createElement("option",{value:"dark"},"Dark Mode"))),r.a.createElement("div",{className:"dropdown-item"},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",checked:c,onChange:e=>l(e.target.checked)}),"Enable Move Sound"))))};var T=e=>{let{resetGame:t,flipBoard:a,isFlipped:n}=e;return r.a.createElement("div",{className:"top-bar"},r.a.createElement("button",{onClick:t,className:"action-button"},"Reset Board"),r.a.createElement("button",{onClick:a,className:"action-button"},n?"Unflip Board":"Flip Board"))};var k=e=>{let{resetGame:t,flipBoard:a,isFlipped:n,theme:c,setTheme:l,enableSound:o,setEnableSound:s}=e;return r.a.createElement("div",{className:"top-container"},r.a.createElement(T,{resetGame:t,flipBoard:a,isFlipped:n}),r.a.createElement(g,{theme:c,setTheme:l,enableSound:o,setEnableSound:s}))};a(26),a(27);var I=()=>{const e=Object(n.useRef)(new m.Chess),{theme:t,setTheme:a,enableSound:c,setEnableSound:l,timerDuration:i,setTimerDuration:d,isFlipped:v,setIsFlipped:b}=Object(n.useContext)(s),[p,f]=Object(n.useState)(e.current.fen()),[S,N]=Object(n.useState)([]),[g,T]=Object(n.useState)(i),[I,_]=Object(n.useState)(i),[D,j]=Object(n.useState)(!1),[w,y]=Object(n.useState)(null),[C,M]=Object(n.useState)(!1),[F,R]=Object(n.useState)(!1),[A,B]=Object(n.useState)("");Object(n.useEffect)(()=>{!async function(){await((e,t,a,n,r)=>{const c=localStorage.getItem(o.CHESS_GAME_KEY);if(c)try{const l=JSON.parse(c);e.current.load(l.fen),t(l.fen),a(l.moveHistory||[]),n(l.whiteTime||o.TIMER_DURATION),r(l.blackTime||o.TIMER_DURATION)}catch(l){console.error("Error parsing JSON from localStorage:",l),localStorage.removeItem(o.CHESS_GAME_KEY)}})(e,f,N,T,_),M(!0)}()},[]),Object(n.useEffect)(()=>{C&&((e,t,a,n)=>{const r={fen:e,moveHistory:t,whiteTime:a,blackTime:n};localStorage.setItem(o.CHESS_GAME_KEY,JSON.stringify(r))})(e.current.fen(),S,g,I)},[p,S,g,I,C]),Object(n.useEffect)(()=>{if(!D||F)return;const t=setInterval(()=>{"w"===e.current.turn()?T(e=>e<=1?(B("Black Won by Time"),R(!0),clearInterval(t),0):e-1):_(e=>e<=1?(B("White Won by Time"),R(!0),clearInterval(t),0):e-1)},1e3);return()=>clearInterval(t)},[D,p,F]);const K=()=>{e.current.reset(),f(e.current.fen()),N([]),T(120),_(120),j(!1),R(!1),B(""),y(null)};return r.a.createElement("div",{className:"main-container"},r.a.createElement(k,{resetGame:K,flipBoard:()=>b(e=>!e),isFlipped:v,theme:t,setTheme:a,enableSound:c,setEnableSound:l}),r.a.createElement("div",{className:"middle-container"},r.a.createElement("div",{className:"left-menu-bar"}),r.a.createElement("div",{className:`chess-container ${t}-theme`},r.a.createElement("div",{className:"left-panel"},r.a.createElement(u,{whiteTime:g,blackTime:I,isWhiteTurn:"w"===e.current.turn(),isFlipped:v})),r.a.createElement("div",{className:"centre-area"},r.a.createElement(O,{position:p,handleMove:t=>{let{from:a,to:n}=t;if(!F)try{const t=e.current.move({from:a,to:n,promotion:"q"});if(!t)return;D||j(!0),f(e.current.fen()),N(e=>[...e,t.san]),y({from:a,to:n}),c&&h(((e,t)=>e.flags.includes("c")?"capture":t.isCheckmate()?"checkmate":t.inCheck()?"check":"move")(t,e.current)),((e,t,a,n,r)=>{e.current.isCheckmate()?(n(!0),r("w"===e.current.turn()?"Black Wins by Checkmate!":"White Wins by Checkmate!")):e.current.isDraw()?(n(!0),r("Game Drawn!")):0===t?(n(!0),r("Black Wins on Time!")):0===a&&(n(!0),r("White Wins on Time!"))})(e,g,I,R,B)}catch(r){console.warn("Invalid move:",r)}},lastMove:w,isFlipped:v}),F&&r.a.createElement("div",{className:"game-over-overlay"},r.a.createElement("div",{className:"game-over-message"},r.a.createElement("p",null,A),r.a.createElement("button",{className:"restart-button",onClick:K},"Restart Game")))),r.a.createElement("div",{className:"right-panel"},r.a.createElement(E,{moveHistory:S}))),r.a.createElement("div",{className:"ad-banner"})),r.a.createElement("div",{className:"bottom-container"}))};var _=()=>r.a.createElement(i,null,r.a.createElement(I,null));var D=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,29)).then(t=>{let{getCLS:a,getFID:n,getFCP:r,getLCP:c,getTTFB:l}=t;a(e),n(e),r(e),c(e),l(e)})};l.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(_,null))),D()}],[[11,1,2]]]);
//# sourceMappingURL=main.5e3310a6.chunk.js.map