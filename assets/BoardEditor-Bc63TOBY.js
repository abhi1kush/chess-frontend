import{r as h,j as n,S as F,D as S}from"./index-D73wQs3Q.js";const B=["pawn","rook","knight","bishop","queen","king"],I=()=>{const[a,l]=h.useState([]),[i,c]=h.useState(!1),[u,g]=h.useState("");h.useEffect(()=>{b()},[]);const k=(t,e)=>{t.dataTransfer.setData("text",e)},x=(t,e)=>{t.preventDefault();const o=t.dataTransfer.getData("text"),s=document.getElementById(o),p=a.map(r=>r.id===e?{...r,piece:{type:s.dataset.type,color:s.dataset.color}}:r.id===s.dataset.square?{...r,piece:null}:r);l(p)},N=t=>{t.preventDefault()},$=(t,e)=>n.jsx("img",{id:`${e}-${t.type}`,src:`pieces/${t.color}_${t.type}.png`,alt:`${t.color} ${t.type}`,draggable:!0,"data-type":t.type,"data-color":t.color,"data-square":e,onDragStart:o=>k(o,`${e}-${t.type}`)},e),j=(t,e)=>{t.preventDefault();const o=a.map(s=>s.id===e?{...s,piece:null}:s);l(o)},v=()=>{const t=a.map(e=>({...e,piece:null}));l(t)},b=()=>{l(P())},C=()=>{const t=[...a].reverse();l(t)},E=()=>{let t="";for(let e=0;e<8;e++){let o=0;for(let s=0;s<8;s++){const p=a.find(r=>r.id===`${e}-${s}`);if(p.piece){o>0&&(t+=o,o=0);const r=R(p.piece);t+=r}else o++}o>0&&(t+=o),e!==7&&(t+="/")}t+=" w - - 0 1",console.log("FEN String:",t),alert("FEN: "+t)},y=t=>{const[e]=t.split(" "),o=e.split("/");if(o.length!==8){alert("Invalid FEN string!");return}const s=[];o.forEach((p,r)=>{let d=0;for(const f of p)if(isNaN(f)){const m=D(f);s.push({id:`${r}-${d}`,color:(r+d)%2===0?"light":"dark",piece:m}),d++}else{const m=parseInt(f);for(let w=0;w<m;w++)s.push({id:`${r}-${d}`,color:(r+d)%2===0?"light":"dark",piece:null}),d++}}),l(s)};return n.jsxs("div",{className:"main-container",children:[n.jsx("div",{className:"top-container",children:n.jsxs("nav",{className:"top-bar",children:[n.jsx("button",{onClick:b,className:"action-button",children:"Reset"}),n.jsx("button",{onClick:v,className:"action-button",children:"Clear"}),n.jsx("button",{onClick:C,className:"action-button",children:"Flip"}),n.jsx("button",{onClick:E,className:"action-button",children:"Generate FEN"}),n.jsx("button",{onClick:()=>c(!0),className:"action-button",children:"Set FEN"}),n.jsx(F,{}),n.jsx(S,{})]})}),n.jsxs("div",{className:"middle-container",children:[n.jsx("div",{className:"left-menu-bar"}),n.jsxs("div",{className:"chessboard-container",children:[n.jsx("div",{id:"chessboard",children:a.map(t=>n.jsx("div",{className:`square ${t.color}`,onDragOver:N,onDrop:e=>x(e,t.id),onContextMenu:e=>j(e,t.id),children:t.piece&&$(t.piece,t.id)},t.id))}),n.jsx("div",{className:"palette",children:["w","b"].map(t=>B.map(e=>n.jsx("img",{id:`palette-${t}-${e}`,src:`pieces/${t}_${e}.png`,alt:`${t} ${e}`,draggable:!0,"data-type":e,"data-color":t,"data-square":"palette",onDragStart:o=>k(o,`palette-${t}-${e}`)},`${t}-${e}`)))})]})]}),i&&n.jsx("div",{className:"fen-popup",children:n.jsxs("div",{className:"fen-popup-content",children:[n.jsx("h3",{children:"Enter FEN String:"}),n.jsx("textarea",{value:u,onChange:t=>g(t.target.value),rows:"3",cols:"40",placeholder:"e.g. rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"}),n.jsxs("div",{className:"fen-popup-buttons",children:[n.jsx("button",{onClick:()=>{y(u),c(!1)},children:"Set Board"}),n.jsx("button",{onClick:()=>c(!1),children:"Cancel"})]})]})})]})},D=a=>{const l=a===a.toUpperCase(),c={p:"pawn",n:"knight",b:"bishop",r:"rook",q:"queen",k:"king"}[a.toLowerCase()];return c?{type:c,color:l?"w":"b"}:(console.warn(`Unknown FEN character: ${a}`),null)},P=()=>{const a={0:["rook","knight","bishop","queen","king","bishop","knight","rook"],1:["pawn","pawn","pawn","pawn","pawn","pawn","pawn","pawn"],6:["pawn","pawn","pawn","pawn","pawn","pawn","pawn","pawn"],7:["rook","knight","bishop","queen","king","bishop","knight","rook"]},l=[];for(let i=0;i<8;i++)for(let c=0;c<8;c++){const u=a[i]?.[c]||null,g=i<2?"w":i>5?"b":null;l.push({id:`${i}-${c}`,color:(i+c)%2===0?"light":"dark",piece:u?{type:u,color:g}:null})}return l},R=a=>{const i={pawn:"p",knight:"n",bishop:"b",rook:"r",queen:"q",king:"k"}[a.type];return a.color==="w"?i.toUpperCase():i};export{I as default};
