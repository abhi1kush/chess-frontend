import{k as Er,o as Vr,r as l,j as i,c as Ar}from"./index-D4LaAxBe.js";var We={exports:{}},Ue,dt;function Ir(){if(dt)return Ue;dt=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Ue=t,Ue}var Ge,ft;function jr(){if(ft)return Ge;ft=1;var t=Ir();function e(){}function r(){}return r.resetWarningCache=e,Ge=function(){function n(a,c,u,f,v,m){if(m!==t){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}n.isRequired=n;function s(){return n}var o={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:e};return o.PropTypes=o,o},Ge}var gt;function Mr(){return gt||(gt=1,We.exports=jr()()),We.exports}var Lr=Mr();const Lo=Er(Lr),kr="data:audio/mpeg;base64,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",Pr="/chess-frontend/assets/capture-ZghC9U6S.mp3",Rr="/chess-frontend/assets/board-start-D1dzlFLG.mp3",Rt=()=>{const{enableSound:t}=Vr.getState().settings;return t},ko=t=>{if(!Rt())return;let e;switch(t){case"move":e=new Audio(kr);break;case"capture":e=new Audio(Pr);break;default:return}e.play()},Po=()=>{if(!Rt())return;new Audio(Rr).play()};function Nr(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}const le="abcdefgh".split(""),Oe={a8:"bR",b8:"bN",c8:"bB",d8:"bQ",e8:"bK",f8:"bB",g8:"bN",h8:"bR",a7:"bP",b7:"bP",c7:"bP",d7:"bP",e7:"bP",f7:"bP",g7:"bP",h7:"bP",a2:"wP",b2:"wP",c2:"wP",d2:"wP",e2:"wP",f2:"wP",g2:"wP",h2:"wP",a1:"wR",b1:"wN",c1:"wB",d1:"wQ",e1:"wK",f1:"wB",g1:"wN",h1:"wR"},Hr={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},Fr={a:7,b:6,c:5,d:4,e:3,f:2,g:1,h:0},_r=[7,6,5,4,3,2,1,0],Br=[0,1,2,3,4,5,6,7],ht={wP:i.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:i.jsx("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),wR:i.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:i.jsxs("g",Object.assign({style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[i.jsx("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),i.jsx("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),i.jsx("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14",style:{strokeLinecap:"butt"}}),i.jsx("path",{d:"M 34,14 L 31,17 L 14,17 L 11,14"}),i.jsx("path",{d:"M 31,17 L 31,29.5 L 14,29.5 L 14,17",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),i.jsx("path",{d:"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5"}),i.jsx("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wN:i.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:i.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[i.jsx("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#ffffff",stroke:"#000000"}}),i.jsx("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#ffffff",stroke:"#000000"}}),i.jsx("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#000000",stroke:"#000000"}}),i.jsx("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#000000",stroke:"#000000"}})]}))})),wB:i.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:i.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[i.jsxs("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt"}},{children:[i.jsx("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),i.jsx("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),i.jsx("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),i.jsx("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wQ:i.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:i.jsxs("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeWidth:"1.5",strokeLinejoin:"round"}},{children:[i.jsx("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"}),i.jsx("path",{d:"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 11,36 11,36 C 9.5,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"}),i.jsx("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30",style:{fill:"none"}}),i.jsx("path",{d:"M 12,33.5 C 18,32.5 27,32.5 33,33.5",style:{fill:"none"}}),i.jsx("circle",{cx:"6",cy:"12",r:"2"}),i.jsx("circle",{cx:"14",cy:"9",r:"2"}),i.jsx("circle",{cx:"22.5",cy:"8",r:"2"}),i.jsx("circle",{cx:"31",cy:"9",r:"2"}),i.jsx("circle",{cx:"39",cy:"12",r:"2"})]}))})),wK:i.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:i.jsxs("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[i.jsx("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),i.jsx("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),i.jsx("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt",strokeLinejoin:"miter"}}),i.jsx("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#ffffff",stroke:"#000000"}}),i.jsx("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30",style:{fill:"none",stroke:"#000000"}}),i.jsx("path",{d:"M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5",style:{fill:"none",stroke:"#000000"}}),i.jsx("path",{d:"M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#000000"}})]}))})),bP:i.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:i.jsx("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),bR:i.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:i.jsxs("g",Object.assign({style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[i.jsx("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),i.jsx("path",{d:"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z ",style:{strokeLinecap:"butt"}}),i.jsx("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),i.jsx("path",{d:"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z ",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),i.jsx("path",{d:"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z ",style:{strokeLinecap:"butt"}}),i.jsx("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z ",style:{strokeLinecap:"butt"}}),i.jsx("path",{d:"M 12,35.5 L 33,35.5 L 33,35.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),i.jsx("path",{d:"M 13,31.5 L 32,31.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),i.jsx("path",{d:"M 14,29.5 L 31,29.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),i.jsx("path",{d:"M 14,16.5 L 31,16.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),i.jsx("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}})]}))})),bN:i.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:i.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[i.jsx("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#000000",stroke:"#000000"}}),i.jsx("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#000000",stroke:"#000000"}}),i.jsx("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#ffffff",stroke:"#ffffff"}}),i.jsx("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#ffffff",stroke:"#ffffff"}}),i.jsx("path",{d:"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z ",style:{fill:"#ffffff",stroke:"none"}})]}))})),bB:i.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:i.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[i.jsxs("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeLinecap:"butt"}},{children:[i.jsx("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),i.jsx("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),i.jsx("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),i.jsx("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#ffffff",strokeLinejoin:"miter"}})]}))})),bQ:i.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:i.jsxs("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}},{children:[i.jsx("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z",style:{strokeLinecap:"butt",fill:"#000000"}}),i.jsx("path",{d:"m 9,26 c 0,2 1.5,2 2.5,4 1,1.5 1,1 0.5,3.5 -1.5,1 -1,2.5 -1,2.5 -1.5,1.5 0,2.5 0,2.5 6.5,1 16.5,1 23,0 0,0 1.5,-1 0,-2.5 0,0 0.5,-1.5 -1,-2.5 -0.5,-2.5 -0.5,-2 0.5,-3.5 1,-2 2.5,-2 2.5,-4 -8.5,-1.5 -18.5,-1.5 -27,0 z"}),i.jsx("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30"}),i.jsx("path",{d:"m 12,33.5 c 6,-1 15,-1 21,0"}),i.jsx("circle",{cx:"6",cy:"12",r:"2"}),i.jsx("circle",{cx:"14",cy:"9",r:"2"}),i.jsx("circle",{cx:"22.5",cy:"8",r:"2"}),i.jsx("circle",{cx:"31",cy:"9",r:"2"}),i.jsx("circle",{cx:"39",cy:"12",r:"2"}),i.jsx("path",{d:"M 11,38.5 A 35,35 1 0 0 34,38.5",style:{fill:"none",stroke:"#000000",strokeLinecap:"butt"}}),i.jsxs("g",Object.assign({style:{fill:"none",stroke:"#ffffff"}},{children:[i.jsx("path",{d:"M 11,29 A 35,35 1 0 1 34,29"}),i.jsx("path",{d:"M 12.5,31.5 L 32.5,31.5"}),i.jsx("path",{d:"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"}),i.jsx("path",{d:"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"})]}))]}))})),bK:i.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:i.jsxs("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[i.jsx("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"},id:"path6570"}),i.jsx("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#000000",fillOpacity:"1",strokeLinecap:"butt",strokeLinejoin:"miter"}}),i.jsx("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#000000",stroke:"#000000"}}),i.jsx("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),i.jsx("path",{d:"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.5,26.6 L 22.5,24.5 C 20,18 10.85,14 6.97,19.85 C 4.5,25.5 13,29.5 13,29.5",style:{fill:"none",stroke:"#ffffff"}}),i.jsx("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30 M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5 M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#ffffff"}})]}))}))};function Xe(t,e,r){const n=e/8,s=t==="white"?Hr:Fr,o=t==="white"?_r:Br,a=s[r[0]]*n+n/2,c=o[parseInt(r[1],10)-1]*n+n/2;return{x:a,y:c}}function pt(t){let e=!1;return Object.keys(Oe).forEach(r=>{t[r]!==Oe[r]&&(e=!0)}),Object.keys(t).forEach(r=>{Oe[r]!==t[r]&&(e=!0)}),e}function Wr(t,e){const r={removed:{},added:{}};return Object.keys(t).forEach(n=>{e[n]!==t[n]&&(r.removed[n]=t[n])}),Object.keys(e).forEach(n=>{t[n]!==e[n]&&(r.added[n]=e[n])}),r}function vt(t){return t==="start"?Oe:typeof t=="string"?Ur(t):t}function Ur(t){if(!Gr(t))return{};t=t.replace(/ .+$/,"");const e=t.split("/"),r={};let n=8;for(let s=0;s<8;s++){const o=e[s].split("");let a=0;for(let c=0;c<o.length;c++)if(o[c].search(/[1-8]/)!==-1){const u=parseInt(o[c],10);a=a+u}else{const u=le[a]+n;r[u]=qr(o[c]),a=a+1}n=n-1}return r}function Gr(t){t=t.replace(/ .+$/,""),t=zr(t);const e=t.split("/");if(e.length!==8)return!1;for(let r=0;r<8;r++)if(e[r].length!==8||e[r].search(/[^kqrnbpKQRNBP1]/)!==-1)return!1;return!0}function zr(t){return t.replace(/8/g,"11111111").replace(/7/g,"1111111").replace(/6/g,"111111").replace(/5/g,"11111").replace(/4/g,"1111").replace(/3/g,"111").replace(/2/g,"11")}function qr(t){return t.toLowerCase()===t?"b"+t.toUpperCase():"w"+t.toUpperCase()}const Qr=(t,e=!0,r,n)=>{const[s,o]=l.useState([]),[a,c]=l.useState([]),[u,f]=l.useState();l.useEffect(()=>{Array.isArray(t)&&(v(),o(t?.filter(g=>g[0]!==g[1])))},[t]),l.useEffect(()=>{r?.(a)},[a]);function v(){c([]),f(void 0)}const m=(g,p)=>{e&&f([g,p,n])},h=[...a,...s];return{arrows:h,newArrow:u,clearArrows:v,drawNewArrow:m,setArrows:c,onArrowDrawEnd:(g,p)=>{if(g===p||!e)return;let y;const D=[g,p,n];h.every(([S,T])=>!(S===g&&T===p))?y=[...a,D]:y=a.filter(([S,T])=>!(S===g&&T===p)),f(void 0),c(y)}}},Nt=l.createContext({}),W=()=>l.useContext(Nt),Yr=l.forwardRef(({allowDragOutsideBoard:t=!0,animationDuration:e=300,areArrowsAllowed:r=!0,arePiecesDraggable:n=!0,arePremovesAllowed:s=!1,autoPromoteToQueen:o=!1,boardOrientation:a="white",boardWidth:c,children:u,clearPremovesOnRightClick:f=!0,customArrows:v,customArrowColor:m="rgb(255,170,0)",customBoardStyle:h,customNotationStyle:d,customDarkSquareStyle:g={backgroundColor:"#B58863"},customDropSquareStyle:p={boxShadow:"inset 0 0 1px 6px rgba(255,255,255,0.75)"},customLightSquareStyle:y={backgroundColor:"#F0D9B5"},customPieces:D,customPremoveDarkSquareStyle:O={backgroundColor:"#A42323"},customPremoveLightSquareStyle:S={backgroundColor:"#BD2828"},customSquare:T="div",customSquareStyles:A,dropOffBoardAction:j="snapback",id:Q=0,isDraggablePiece:Y=()=>!0,getPositionObject:U=()=>{},onArrowsChange:re=()=>{},onDragOverSquare:$=()=>{},onMouseOutSquare:V=()=>{},onMouseOverSquare:M=()=>{},onPieceClick:K=()=>{},onPieceDragBegin:F=()=>{},onPieceDragEnd:_=()=>{},onPieceDrop:H=()=>!0,onPieceDropOffBoard:ne=()=>{},onPromotionCheck:Ve=(I,L,fe)=>(fe==="wP"&&I[1]==="7"&&L[1]==="8"||fe==="bP"&&I[1]==="2"&&L[1]==="1")&&Math.abs(I.charCodeAt(0)-L.charCodeAt(0))<=1,onPromotionPieceSelect:Ae=()=>!0,onSparePieceDrop:de=()=>!0,onSquareClick:Ie=()=>{},onSquareRightClick:je=()=>{},position:se="start",promotionDialogVariant:Me="default",promotionToSquare:oe=null,showBoardNotation:C=!0,showPromotionDialog:B=!1,snapToCursor:J=!0},ie)=>{const[I,L]=l.useState(vt(se)),[fe,or]=l.useState({removed:{},added:{}}),[Le,ee]=l.useState(void 0),[ir,ke]=l.useState(B&&!o),[ar,ut]=l.useState(null),[cr,Pe]=l.useState(oe),[lt,Re]=l.useState([]),G=l.useRef(lt),[Ne,ge]=l.useState(),[ur,lr]=l.useState(Object.assign(Object.assign({},ht),D)),[dr,he]=l.useState(!1),[He,fr]=l.useState(),[pe,ve]=l.useState(!1),[gr,hr]=l.useState(null);l.useImperativeHandle(ie,()=>({clearPremoves(w=!0){me(w)}})),l.useEffect(()=>{lr(Object.assign(Object.assign({},ht),D))},[D]),l.useEffect(()=>{ke(B),Pe(oe)},[oe,B]),l.useEffect(()=>{var w,x,k;Be();const E=vt(se),z=Wr(I,E),N=((w=Object.keys(z.added))===null||w===void 0?void 0:w.length)<=2?(k=(x=Object.entries(z.added))===null||x===void 0?void 0:x[0])===null||k===void 0?void 0:k[1][0]:void 0;if(pe)L(E),ve(!1),s&&_e(N),He&&clearTimeout(He);else if(dr)L(E),ve(!1),s&&_e(N);else{pt(E)&&Le!==void 0?ee(N):pt(E)?ee(void 0):ee("b"),or(z),ve(!0);const xr=setTimeout(()=>{L(E),ve(!1),s&&_e(N)},e);fr(xr)}return he(!1),U(E),Fe(),()=>{clearTimeout(He)}},[se]);const{arrows:pr,newArrow:vr,clearArrows:Fe,drawNewArrow:mr,onArrowDrawEnd:yr}=Qr(v,r,re,m);function br(w,x,k,E){if(w===x)return;if(Fe(),s&&pe||s&&(Le===k[0]||G.current.filter(N=>N.piece[0]===k[0]).length>0)){const N=[...G.current];N.push({sourceSq:w,targetSq:x,piece:k}),G.current=N,Re([...N]),Be();return}if(!s&&pe)return;const z=Object.assign({},I);he(!!E),ee(k[0]),H.length?H(w,x,k)||(me(),he(!1)):(delete z[w],z[x]=k,L(z)),Be(),U(z)}function Or(w){const x=Object.assign({},I);delete x[w],L(x),U(x)}function _e(w){if(G.current.length===0)return;const x=G.current[0];if(x.piece[0]!==void 0&&x.piece[0]!==w&&H.length)if(ee(x.piece[0]),he(!0),H(x.sourceSq,x.targetSq,x.piece)){const E=[...G.current];E.shift(),G.current=E,Re([...E])}else me()}function Dr(w,x){if(!de(w,x))return;const E=Object.assign({},I);E[x]=w,L(E),U(E)}function me(w=!0){w&&ee(void 0),G.current=[],Re([])}function Be(){ut(null),Pe(null),ke(!1)}function Sr(w){ge(w)}function Cr(w){if(Ne){if(Ne===w){ge(void 0),f&&me(!1),je(w);return}}else ge(void 0)}function wr(){ge(void 0)}const Tr={allowDragOutsideBoard:t,animationDuration:e,arePiecesDraggable:n,arePremovesAllowed:s,arrows:pr,autoPromoteToQueen:o,boardOrientation:a,boardWidth:c,chessPieces:ur,clearArrows:Fe,clearCurrentRightClickDown:wr,currentPosition:I,currentRightClickDown:Ne,customArrowColor:m,customBoardStyle:h,customDarkSquareStyle:g,customDropSquareStyle:p,customLightSquareStyle:y,customNotationStyle:d,customPremoveDarkSquareStyle:O,customPremoveLightSquareStyle:S,customSquare:T,customSquareStyles:A,deletePieceFromSquare:Or,drawNewArrow:mr,dropOffBoardAction:j,handleSetPosition:br,handleSparePieceDrop:Dr,id:Q,isDraggablePiece:Y,isWaitingForAnimation:pe,lastPieceColour:Le,lastSquareDraggedOver:gr,newArrow:vr,onArrowDrawEnd:yr,onDragOverSquare:$,onMouseOutSquare:V,onMouseOverSquare:M,onPieceClick:K,onPieceDragBegin:F,onPieceDragEnd:_,onPieceDrop:H,onPieceDropOffBoard:ne,onPromotionCheck:Ve,onPromotionPieceSelect:Ae,onRightClickDown:Sr,onRightClickUp:Cr,onSparePieceDrop:de,onSquareClick:Ie,positionDifferences:fe,premoves:lt,promoteFromSquare:ar,promoteToSquare:cr,promotionDialogVariant:Me,setLastSquareDraggedOver:hr,setPromoteFromSquare:ut,setPromoteToSquare:Pe,setShowPromoteDialog:ke,showBoardNotation:C,showPromoteDialog:ir,snapToCursor:J};return i.jsx(Nt.Provider,Object.assign({value:Tr},{children:u}))});function Kr({row:t,col:e}){const{boardOrientation:r,boardWidth:n,customDarkSquareStyle:s,customLightSquareStyle:o,customNotationStyle:a}=W(),c=o.backgroundColor,u=s.backgroundColor,f=e===0,v=t===7,m=f&&v;function h(){return r==="white"?8-t:t+1}function d(){return r==="black"?le[7-e]:le[e]}function g(){return i.jsxs(i.Fragment,{children:[i.jsx("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:c}),yt(n,a))},{children:h()})),i.jsx("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:c}),mt(n,a))},{children:d()}))]})}function p(){return i.jsx("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},{color:e%2!==0?u:c}),mt(n,a))},{children:d()}))}function y(){return i.jsx("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},r==="black"?{color:t%2===0?u:c}:{color:t%2===0?u:c}),yt(n,a))},{children:h()}))}return m?g():v?p():f?y():null}const mt=(t,e)=>Object.assign({alignSelf:"flex-end",paddingLeft:t/8-t/48,fontSize:t/48},e),yt=(t,e)=>Object.assign({alignSelf:"flex-start",paddingRight:t/8-t/48,fontSize:t/48},e),Ht=l.createContext({dragDropManager:void 0});function P(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var bt=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Ot=function(){return Math.random().toString(36).substring(7).split("").join(".")},Dt={INIT:"@@redux/INIT"+Ot(),REPLACE:"@@redux/REPLACE"+Ot()};function Zr(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Ft(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(P(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(P(1));return r(Ft)(t,e)}if(typeof t!="function")throw new Error(P(2));var s=t,o=e,a=[],c=a,u=!1;function f(){c===a&&(c=a.slice())}function v(){if(u)throw new Error(P(3));return o}function m(p){if(typeof p!="function")throw new Error(P(4));if(u)throw new Error(P(5));var y=!0;return f(),c.push(p),function(){if(y){if(u)throw new Error(P(6));y=!1,f();var O=c.indexOf(p);c.splice(O,1),a=null}}}function h(p){if(!Zr(p))throw new Error(P(7));if(typeof p.type>"u")throw new Error(P(8));if(u)throw new Error(P(9));try{u=!0,o=s(o,p)}finally{u=!1}for(var y=a=c,D=0;D<y.length;D++){var O=y[D];O()}return p}function d(p){if(typeof p!="function")throw new Error(P(10));s=p,h({type:Dt.REPLACE})}function g(){var p,y=m;return p={subscribe:function(O){if(typeof O!="object"||O===null)throw new Error(P(11));function S(){O.next&&O.next(v())}S();var T=y(S);return{unsubscribe:T}}},p[bt]=function(){return this},p}return h({type:Dt.INIT}),n={dispatch:h,subscribe:m,getState:v,replaceReducer:d},n[bt]=g,n}function b(t,e,...r){if(Xr()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let n;if(e===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let s=0;n=new Error(e.replace(/%s/g,function(){return r[s++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function Xr(){return typeof process<"u"&&!0}function $r(t,e,r){return e.split(".").reduce((n,s)=>n&&n[s]?n[s]:r||null,t)}function Jr(t,e){return t.filter(r=>r!==e)}function _t(t){return typeof t=="object"}function en(t,e){const r=new Map,n=o=>{r.set(o,r.has(o)?r.get(o)+1:1)};t.forEach(n),e.forEach(n);const s=[];return r.forEach((o,a)=>{o===1&&s.push(a)}),s}function tn(t,e){return t.filter(r=>e.indexOf(r)>-1)}const nt="dnd-core/INIT_COORDS",Ce="dnd-core/BEGIN_DRAG",st="dnd-core/PUBLISH_DRAG_SOURCE",we="dnd-core/HOVER",Te="dnd-core/DROP",xe="dnd-core/END_DRAG";function St(t,e){return{type:nt,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const rn={type:nt,payload:{clientOffset:null,sourceClientOffset:null}};function nn(t){return function(r=[],n={publishSource:!0}){const{publishSource:s=!0,clientOffset:o,getSourceClientOffset:a}=n,c=t.getMonitor(),u=t.getRegistry();t.dispatch(St(o)),sn(r,c,u);const f=cn(r,c);if(f==null){t.dispatch(rn);return}let v=null;if(o){if(!a)throw new Error("getSourceClientOffset must be defined");on(a),v=a(f)}t.dispatch(St(o,v));const h=u.getSource(f).beginDrag(c,f);if(h==null)return;an(h),u.pinSource(f);const d=u.getSourceType(f);return{type:Ce,payload:{itemType:d,item:h,sourceId:f,clientOffset:o||null,sourceClientOffset:v||null,isSourcePublic:!!s}}}}function sn(t,e,r){b(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(n){b(r.getSource(n),"Expected sourceIds to be registered.")})}function on(t){b(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function an(t){b(_t(t),"Item must be an object.")}function cn(t,e){let r=null;for(let n=t.length-1;n>=0;n--)if(e.canDragSource(t[n])){r=t[n];break}return r}function un(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ln(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){un(t,s,r[s])})}return t}function dn(t){return function(r={}){const n=t.getMonitor(),s=t.getRegistry();fn(n),pn(n).forEach((a,c)=>{const u=gn(a,c,s,n),f={type:Te,payload:{dropResult:ln({},r,u)}};t.dispatch(f)})}}function fn(t){b(t.isDragging(),"Cannot call drop while not dragging."),b(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function gn(t,e,r,n){const s=r.getTarget(t);let o=s?s.drop(n,t):void 0;return hn(o),typeof o>"u"&&(o=e===0?{}:n.getDropResult()),o}function hn(t){b(typeof t>"u"||_t(t),"Drop result must either be an object or undefined.")}function pn(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function vn(t){return function(){const r=t.getMonitor(),n=t.getRegistry();mn(r);const s=r.getSourceId();return s!=null&&(n.getSource(s,!0).endDrag(r,s),n.unpinSource()),{type:xe}}}function mn(t){b(t.isDragging(),"Cannot call endDrag while not dragging.")}function $e(t,e){return e===null?t===null:Array.isArray(t)?t.some(r=>r===e):t===e}function yn(t){return function(r,{clientOffset:n}={}){bn(r);const s=r.slice(0),o=t.getMonitor(),a=t.getRegistry(),c=o.getItemType();return Dn(s,a,c),On(s,o,a),Sn(s,o,a),{type:we,payload:{targetIds:s,clientOffset:n||null}}}}function bn(t){b(Array.isArray(t),"Expected targetIds to be an array.")}function On(t,e,r){b(e.isDragging(),"Cannot call hover while not dragging."),b(!e.didDrop(),"Cannot call hover after drop.");for(let n=0;n<t.length;n++){const s=t[n];b(t.lastIndexOf(s)===n,"Expected targetIds to be unique in the passed array.");const o=r.getTarget(s);b(o,"Expected targetIds to be registered.")}}function Dn(t,e,r){for(let n=t.length-1;n>=0;n--){const s=t[n],o=e.getTargetType(s);$e(o,r)||t.splice(n,1)}}function Sn(t,e,r){t.forEach(function(n){r.getTarget(n).hover(e,n)})}function Cn(t){return function(){if(t.getMonitor().isDragging())return{type:st}}}function wn(t){return{beginDrag:nn(t),publishDragSource:Cn(t),hover:yn(t),drop:dn(t),endDrag:vn(t)}}class Tn{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:r}=this.store;function n(o){return(...a)=>{const c=o.apply(e,a);typeof c<"u"&&r(c)}}const s=wn(this);return Object.keys(s).reduce((o,a)=>{const c=s[a];return o[a]=n(c),o},{})}dispatch(e){this.store.dispatch(e)}constructor(e,r){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=r,e.subscribe(this.handleRefCountChange)}}function xn(t,e){return{x:t.x+e.x,y:t.y+e.y}}function Bt(t,e){return{x:t.x-e.x,y:t.y-e.y}}function En(t){const{clientOffset:e,initialClientOffset:r,initialSourceClientOffset:n}=t;return!e||!r||!n?null:Bt(xn(e,n),r)}function Vn(t){const{clientOffset:e,initialClientOffset:r}=t;return!e||!r?null:Bt(e,r)}const ce=[],ot=[];ce.__IS_NONE__=!0;ot.__IS_ALL__=!0;function An(t,e){return t===ce?!1:t===ot||typeof e>"u"?!0:tn(e,t).length>0}class In{subscribeToStateChange(e,r={}){const{handlerIds:n}=r;b(typeof e=="function","listener must be a function."),b(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let s=this.store.getState().stateId;const o=()=>{const a=this.store.getState(),c=a.stateId;try{c===s||c===s+1&&!An(a.dirtyHandlerIds,n)||e()}finally{s=c}};return this.store.subscribe(o)}subscribeToOffsetChange(e){b(typeof e=="function","listener must be a function.");let r=this.store.getState().dragOffset;const n=()=>{const s=this.store.getState().dragOffset;s!==r&&(r=s,e())};return this.store.subscribe(n)}canDragSource(e){if(!e)return!1;const r=this.registry.getSource(e);return b(r,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:r.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const r=this.registry.getTarget(e);if(b(r,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(e),s=this.getItemType();return $e(n,s)&&r.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const r=this.registry.getSource(e,!0);if(b(r,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(e),s=this.getItemType();return n!==s?!1:r.isDragging(this,e)}isOverTarget(e,r={shallow:!1}){if(!e)return!1;const{shallow:n}=r;if(!this.isDragging())return!1;const s=this.registry.getTargetType(e),o=this.getItemType();if(o&&!$e(s,o))return!1;const a=this.getTargetIds();if(!a.length)return!1;const c=a.indexOf(e);return n?c===a.length-1:c>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return En(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return Vn(this.store.getState().dragOffset)}constructor(e,r){this.store=e,this.registry=r}}const Ct=typeof global<"u"?global:self,Wt=Ct.MutationObserver||Ct.WebKitMutationObserver;function Ut(t){return function(){const r=setTimeout(s,0),n=setInterval(s,50);function s(){clearTimeout(r),clearInterval(n),t()}}}function jn(t){let e=1;const r=new Wt(t),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}const Mn=typeof Wt=="function"?jn:Ut;class Ln{enqueueTask(e){const{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const r=this.index;if(this.index++,e[r].call(),this.index>this.capacity){for(let n=0,s=e.length-this.index;n<s;n++)e[n]=e[n+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=Mn(this.flush),this.requestErrorThrow=Ut(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class kn{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,r){this.onError=e,this.release=r,this.task=null}}class Pn{create(e){const r=this.freeTasks,n=r.length?r.pop():new kn(this.onError,s=>r[r.length]=s);return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}const Gt=new Ln,Rn=new Pn(Gt.registerPendingError);function Nn(t){Gt.enqueueTask(Rn.create(t))}const it="dnd-core/ADD_SOURCE",at="dnd-core/ADD_TARGET",ct="dnd-core/REMOVE_SOURCE",Ee="dnd-core/REMOVE_TARGET";function Hn(t){return{type:it,payload:{sourceId:t}}}function Fn(t){return{type:at,payload:{targetId:t}}}function _n(t){return{type:ct,payload:{sourceId:t}}}function Bn(t){return{type:Ee,payload:{targetId:t}}}function Wn(t){b(typeof t.canDrag=="function","Expected canDrag to be a function."),b(typeof t.beginDrag=="function","Expected beginDrag to be a function."),b(typeof t.endDrag=="function","Expected endDrag to be a function.")}function Un(t){b(typeof t.canDrop=="function","Expected canDrop to be a function."),b(typeof t.hover=="function","Expected hover to be a function."),b(typeof t.drop=="function","Expected beginDrag to be a function.")}function Je(t,e){if(e&&Array.isArray(t)){t.forEach(r=>Je(r,!1));return}b(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var R;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(R||(R={}));let Gn=0;function zn(){return Gn++}function qn(t){const e=zn().toString();switch(t){case R.SOURCE:return`S${e}`;case R.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function wt(t){switch(t[0]){case"S":return R.SOURCE;case"T":return R.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function Tt(t,e){const r=t.entries();let n=!1;do{const{done:s,value:[,o]}=r.next();if(o===e)return!0;n=!!s}while(!n);return!1}class Qn{addSource(e,r){Je(e),Wn(r);const n=this.addHandler(R.SOURCE,e,r);return this.store.dispatch(Hn(n)),n}addTarget(e,r){Je(e,!0),Un(r);const n=this.addHandler(R.TARGET,e,r);return this.store.dispatch(Fn(n)),n}containsHandler(e){return Tt(this.dragSources,e)||Tt(this.dropTargets,e)}getSource(e,r=!1){return b(this.isSourceId(e),"Expected a valid source ID."),r&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return b(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return b(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return b(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return wt(e)===R.SOURCE}isTargetId(e){return wt(e)===R.TARGET}removeSource(e){b(this.getSource(e),"Expected an existing source."),this.store.dispatch(_n(e)),Nn(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){b(this.getTarget(e),"Expected an existing target."),this.store.dispatch(Bn(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const r=this.getSource(e);b(r,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=r}unpinSource(){b(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,r,n){const s=qn(e);return this.types.set(s,r),e===R.SOURCE?this.dragSources.set(s,n):e===R.TARGET&&this.dropTargets.set(s,n),s}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const Yn=(t,e)=>t===e;function Kn(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function Zn(t,e,r=Yn){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!r(t[n],e[n]))return!1;return!0}function Xn(t=ce,e){switch(e.type){case we:break;case it:case at:case Ee:case ct:return ce;case Ce:case st:case xe:case Te:default:return ot}const{targetIds:r=[],prevTargetIds:n=[]}=e.payload,s=en(r,n);if(!(s.length>0||!Zn(r,n)))return ce;const a=n[n.length-1],c=r[r.length-1];return a!==c&&(a&&s.push(a),c&&s.push(c)),s}function $n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Jn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){$n(t,s,r[s])})}return t}const xt={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function es(t=xt,e){const{payload:r}=e;switch(e.type){case nt:case Ce:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case we:return Kn(t.clientOffset,r.clientOffset)?t:Jn({},t,{clientOffset:r.clientOffset});case xe:case Te:return xt;default:return t}}function ts(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function te(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){ts(t,s,r[s])})}return t}const rs={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function ns(t=rs,e){const{payload:r}=e;switch(e.type){case Ce:return te({},t,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case st:return te({},t,{isSourcePublic:!0});case we:return te({},t,{targetIds:r.targetIds});case Ee:return t.targetIds.indexOf(r.targetId)===-1?t:te({},t,{targetIds:Jr(t.targetIds,r.targetId)});case Te:return te({},t,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case xe:return te({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function ss(t=0,e){switch(e.type){case it:case at:return t+1;case ct:case Ee:return t-1;default:return t}}function os(t=0){return t+1}function is(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function as(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){is(t,s,r[s])})}return t}function cs(t={},e){return{dirtyHandlerIds:Xn(t.dirtyHandlerIds,{type:e.type,payload:as({},e.payload,{prevTargetIds:$r(t,"dragOperation.targetIds",[])})}),dragOffset:es(t.dragOffset,e),refCount:ss(t.refCount,e),dragOperation:ns(t.dragOperation,e),stateId:os(t.stateId)}}function us(t,e=void 0,r={},n=!1){const s=ls(n),o=new In(s,new Qn(s)),a=new Tn(s,o),c=t(a,e,r);return a.receiveBackend(c),a}function ls(t){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return Ft(cs,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function ds(t,e){if(t==null)return{};var r=fs(t,e),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function fs(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,o;for(o=0;o<n.length;o++)s=n[o],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}let Et=0;const De=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var gs=l.memo(function(e){var{children:r}=e,n=ds(e,["children"]);const[s,o]=hs(n);return l.useEffect(()=>{if(o){const a=zt();return++Et,()=>{--Et===0&&(a[De]=null)}}},[]),i.jsx(Ht.Provider,{value:s,children:r})});function hs(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=ps(t.backend,t.context,t.options,t.debugMode),r=!t.context;return[e,r]}function ps(t,e=zt(),r,n){const s=e;return s[De]||(s[De]={dragDropManager:us(t,e,r,n)}),s[De]}function zt(){return typeof global<"u"?global:window}var vs=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,o;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[s]))return!1;for(s=n;s--!==0;){var a=o[s];if(!t(e[a],r[a]))return!1}return!0}return e!==e&&r!==r};const Z=typeof window<"u"?l.useLayoutEffect:l.useEffect;function qt(t,e,r){const[n,s]=l.useState(()=>e(t)),o=l.useCallback(()=>{const a=e(t);vs(n,a)||(s(a),r&&r())},[n,t,r]);return Z(o),[n,o]}function ms(t,e,r){const[n,s]=qt(t,e,r);return Z(function(){const a=t.getHandlerId();if(a!=null)return t.subscribeToStateChange(s,{handlerIds:[a]})},[t,s]),n}function Qt(t,e,r){return ms(e,t||(()=>({})),()=>r.reconnect())}function Yt(t,e){const r=[...e||[]];return e==null&&typeof t!="function"&&r.push(t),l.useMemo(()=>typeof t=="function"?t():t,r)}function ys(t){return l.useMemo(()=>t.hooks.dragSource(),[t])}function bs(t){return l.useMemo(()=>t.hooks.dragPreview(),[t])}let ze=!1,qe=!1;class Os{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){b(!ze,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return ze=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{ze=!1}}isDragging(){if(!this.sourceId)return!1;b(!qe,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return qe=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{qe=!1}}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,r){return this.internalMonitor.isOverTarget(e,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let Qe=!1;class Ds{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}canDrop(){if(!this.targetId)return!1;b(!Qe,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Qe=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Qe=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function Ss(t,e,r){const n=r.getRegistry(),s=n.addTarget(t,e);return[s,()=>n.removeTarget(s)]}function Cs(t,e,r){const n=r.getRegistry(),s=n.addSource(t,e);return[s,()=>n.removeSource(s)]}function et(t,e,r,n){let s;if(s!==void 0)return!!s;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const o=Object.keys(t),a=Object.keys(e);if(o.length!==a.length)return!1;const c=Object.prototype.hasOwnProperty.bind(e);for(let u=0;u<o.length;u++){const f=o[u];if(!c(f))return!1;const v=t[f],m=e[f];if(s=void 0,s===!1||s===void 0&&v!==m)return!1}return!0}function tt(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function ws(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function Ts(t){return(e=null,r=null)=>{if(!l.isValidElement(e)){const o=e;return t(o,r),o}const n=e;return ws(n),xs(n,r?o=>t(o,r):t)}}function Kt(t){const e={};return Object.keys(t).forEach(r=>{const n=t[r];if(r.endsWith("Ref"))e[r]=t[r];else{const s=Ts(n);e[r]=()=>s}}),e}function Vt(t,e){typeof t=="function"?t(e):t.current=e}function xs(t,e){const r=t.ref;return b(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?l.cloneElement(t,{ref:n=>{Vt(r,n),Vt(e,n)}}):l.cloneElement(t,{ref:e})}class Es{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?e?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),r):(this.lastConnectedDragSource=e,r):r}reconnectDragPreview(e=!1){const r=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!et(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!et(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=Kt({dragSource:(r,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,tt(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,tt(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class Vs{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const r=this.dropTarget;if(this.handlerId){if(!r){this.lastConnectedDropTarget=r;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!et(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=Kt({dropTarget:(r,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,tt(r)?this.dropTargetRef=r:this.dropTargetNode=r,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function X(){const{dragDropManager:t}=l.useContext(Ht);return b(t!=null,"Expected drag drop context"),t}function As(t,e){const r=X(),n=l.useMemo(()=>new Es(r.getBackend()),[r]);return Z(()=>(n.dragSourceOptions=t||null,n.reconnect(),()=>n.disconnectDragSource()),[n,t]),Z(()=>(n.dragPreviewOptions=e||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,e]),n}function Is(){const t=X();return l.useMemo(()=>new Os(t),[t])}class js{beginDrag(){const e=this.spec,r=this.monitor;let n=null;return typeof e.item=="object"?n=e.item:typeof e.item=="function"?n=e.item(r):n={},n??null}canDrag(){const e=this.spec,r=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(r):!0}isDragging(e,r){const n=this.spec,s=this.monitor,{isDragging:o}=n;return o?o(s):r===e.getSourceId()}endDrag(){const e=this.spec,r=this.monitor,n=this.connector,{end:s}=e;s&&s(r.getItem(),r),n.reconnect()}constructor(e,r,n){this.spec=e,this.monitor=r,this.connector=n}}function Ms(t,e,r){const n=l.useMemo(()=>new js(t,e,r),[e,r]);return l.useEffect(()=>{n.spec=t},[t]),n}function Ls(t){return l.useMemo(()=>{const e=t.type;return b(e!=null,"spec.type must be defined"),e},[t])}function ks(t,e,r){const n=X(),s=Ms(t,e,r),o=Ls(t);Z(function(){if(o!=null){const[c,u]=Cs(o,s,n);return e.receiveHandlerId(c),r.receiveHandlerId(c),u}},[n,e,r,s,o])}function Ps(t,e){const r=Yt(t,e);b(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=Is(),s=As(r.options,r.previewOptions);return ks(r,n,s),[Qt(r.collect,n,s),ys(s),bs(s)]}function Rs(t){const r=X().getMonitor(),[n,s]=qt(r,t);return l.useEffect(()=>r.subscribeToOffsetChange(s)),l.useEffect(()=>r.subscribeToStateChange(s)),n}function Ns(t){return l.useMemo(()=>t.hooks.dropTarget(),[t])}function Hs(t){const e=X(),r=l.useMemo(()=>new Vs(e.getBackend()),[e]);return Z(()=>(r.dropTargetOptions=t||null,r.reconnect(),()=>r.disconnectDropTarget()),[t]),r}function Fs(){const t=X();return l.useMemo(()=>new Ds(t),[t])}function _s(t){const{accept:e}=t;return l.useMemo(()=>(b(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class Bs{canDrop(){const e=this.spec,r=this.monitor;return e.canDrop?e.canDrop(r.getItem(),r):!0}hover(){const e=this.spec,r=this.monitor;e.hover&&e.hover(r.getItem(),r)}drop(){const e=this.spec,r=this.monitor;if(e.drop)return e.drop(r.getItem(),r)}constructor(e,r){this.spec=e,this.monitor=r}}function Ws(t,e){const r=l.useMemo(()=>new Bs(t,e),[e]);return l.useEffect(()=>{r.spec=t},[t]),r}function Us(t,e,r){const n=X(),s=Ws(t,e),o=_s(t);Z(function(){const[c,u]=Ss(o,s,n);return e.receiveHandlerId(c),r.receiveHandlerId(c),u},[n,e,s,r,o.map(a=>a.toString()).join("|")])}function Gs(t,e){const r=Yt(t,e),n=Fs(),s=Hs(r.options);return Us(r,n,s),[Qt(r.collect,n,s),Ns(s)]}function Zt(t){let e=null;return()=>(e==null&&(e=t()),e)}function zs(t,e){return t.filter(r=>r!==e)}function qs(t,e){const r=new Set,n=o=>r.add(o);t.forEach(n),e.forEach(n);const s=[];return r.forEach(o=>s.push(o)),s}class Qs{enter(e){const r=this.entered.length,n=s=>this.isNodeInDocument(s)&&(!s.contains||s.contains(e));return this.entered=qs(this.entered.filter(n),[e]),r===0&&this.entered.length>0}leave(e){const r=this.entered.length;return this.entered=zs(this.entered.filter(this.isNodeInDocument),e),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class Ys{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const r={};Object.keys(this.config.exposeProperties).forEach(n=>{const s=this.config.exposeProperties[n];s!=null&&(r[n]={value:s(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,r){return r===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const Xt="__NATIVE_FILE__",$t="__NATIVE_URL__",Jt="__NATIVE_TEXT__",er="__NATIVE_HTML__";var At=Object.freeze({__proto__:null,FILE:Xt,HTML:er,TEXT:Jt,URL:$t});function Ye(t,e,r){const n=e.reduce((s,o)=>s||t.getData(o),"");return n??r}const rt={[Xt]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[er]:{exposeProperties:{html:(t,e)=>Ye(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[$t]:{exposeProperties:{urls:(t,e)=>Ye(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[Jt]:{exposeProperties:{text:(t,e)=>Ye(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function Ks(t,e){const r=rt[t];if(!r)throw new Error(`native type ${t} has no configuration`);const n=new Ys(r);return n.loadDataTransfer(e),n}function Ke(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(rt).filter(r=>{const n=rt[r];return n?.matchesTypes?n.matchesTypes.some(s=>e.indexOf(s)>-1):!1})[0]||null}const Zs=Zt(()=>/firefox/i.test(navigator.userAgent)),tr=Zt(()=>!!window.safari);class It{interpolate(e){const{xs:r,ys:n,c1s:s,c2s:o,c3s:a}=this;let c=r.length-1;if(e===r[c])return n[c];let u=0,f=a.length-1,v;for(;u<=f;){v=Math.floor(.5*(u+f));const d=r[v];if(d<e)u=v+1;else if(d>e)f=v-1;else return n[v]}c=Math.max(0,f);const m=e-r[c],h=m*m;return n[c]+s[c]*m+o[c]*h+a[c]*m*h}constructor(e,r){const{length:n}=e,s=[];for(let d=0;d<n;d++)s.push(d);s.sort((d,g)=>e[d]<e[g]?-1:1);const o=[],a=[];let c,u;for(let d=0;d<n-1;d++)c=e[d+1]-e[d],u=r[d+1]-r[d],o.push(c),a.push(u/c);const f=[a[0]];for(let d=0;d<o.length-1;d++){const g=a[d],p=a[d+1];if(g*p<=0)f.push(0);else{c=o[d];const y=o[d+1],D=c+y;f.push(3*D/((D+y)/g+(D+c)/p))}}f.push(a[a.length-1]);const v=[],m=[];let h;for(let d=0;d<f.length-1;d++){h=a[d];const g=f[d],p=1/o[d],y=g+f[d+1]-h-h;v.push((h-g-y)*p),m.push(y*p*p)}this.xs=e,this.ys=r,this.c1s=f,this.c2s=v,this.c3s=m}}const Xs=1;function rr(t){const e=t.nodeType===Xs?t:t.parentElement;if(!e)return null;const{top:r,left:n}=e.getBoundingClientRect();return{x:n,y:r}}function ye(t){return{x:t.clientX,y:t.clientY}}function $s(t){var e;return t.nodeName==="IMG"&&(Zs()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function Js(t,e,r,n){let s=t?e.width:r,o=t?e.height:n;return tr()&&t&&(o/=window.devicePixelRatio,s/=window.devicePixelRatio),{dragPreviewWidth:s,dragPreviewHeight:o}}function eo(t,e,r,n,s){const o=$s(e),c=rr(o?t:e),u={x:r.x-c.x,y:r.y-c.y},{offsetWidth:f,offsetHeight:v}=t,{anchorX:m,anchorY:h}=n,{dragPreviewWidth:d,dragPreviewHeight:g}=Js(o,e,f,v),p=()=>{let j=new It([0,.5,1],[u.y,u.y/v*g,u.y+g-v]).interpolate(h);return tr()&&o&&(j+=(window.devicePixelRatio-1)*g),j},y=()=>new It([0,.5,1],[u.x,u.x/f*d,u.x+d-f]).interpolate(m),{offsetX:D,offsetY:O}=s,S=D===0||D,T=O===0||O;return{x:S?D:y(),y:T?O:p()}}let to=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,r){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=r}};function ro(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){ro(t,s,r[s])})}return t}class no{profile(){var e,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,r,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,r),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,r,n){this.sourceNodes.set(e,r),this.sourceNodeOptions.set(e,n);const s=a=>this.handleDragStart(a,e),o=a=>this.handleSelectStart(a);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",s),r.addEventListener("selectstart",o),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),r.removeEventListener("dragstart",s),r.removeEventListener("selectstart",o),r.setAttribute("draggable","false")}}connectDropTarget(e,r){const n=a=>this.handleDragEnter(a,e),s=a=>this.handleDragOver(a,e),o=a=>this.handleDrop(a,e);return r.addEventListener("dragenter",n),r.addEventListener("dragover",s),r.addEventListener("drop",o),()=>{r.removeEventListener("dragenter",n),r.removeEventListener("dragover",s),r.removeEventListener("drop",o)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(e);return jt({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(e);return jt({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(At).some(r=>At[r]===e)}beginDragNativeItem(e,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=Ks(e,r),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,r){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(e,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(e,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(e,r){this.dropTargetIds.unshift(r)}constructor(e,r,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=s=>{const o=this.sourceNodes.get(s);return o&&rr(o)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=s=>!!(s&&this.document&&this.document.body&&this.document.body.contains(s)),this.endDragIfSourceWasRemovedFromDOM=()=>{const s=this.currentDragSourceNode;s==null||this.isNodeInDocument(s)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=s=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(s||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=s=>{if(s.defaultPrevented)return;const{dragStartSourceIds:o}=this;this.dragStartSourceIds=null;const a=ye(s);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(o||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:a});const{dataTransfer:c}=s,u=Ke(c);if(this.monitor.isDragging()){if(c&&typeof c.setDragImage=="function"){const v=this.monitor.getSourceId(),m=this.sourceNodes.get(v),h=this.sourcePreviewNodes.get(v)||m;if(h){const{anchorX:d,anchorY:g,offsetX:p,offsetY:y}=this.getCurrentSourcePreviewNodeOptions(),S=eo(m,h,a,{anchorX:d,anchorY:g},{offsetX:p,offsetY:y});c.setDragImage(h,S.x,S.y)}}try{c?.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(s.target);const{captureDraggingState:f}=this.getCurrentSourcePreviewNodeOptions();f?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(u)this.beginDragNativeItem(u);else{if(c&&!c.types&&(s.target&&!s.target.hasAttribute||!s.target.hasAttribute("draggable")))return;s.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=s=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(s.dataTransfer)}if(!this.enterLeaveCounter.enter(s.target)||this.monitor.isDragging())return;const{dataTransfer:c}=s,u=Ke(c);u&&this.beginDragNativeItem(u,c)},this.handleTopDragEnter=s=>{const{dragEnterTargetIds:o}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=s.altKey,o.length>0&&this.actions.hover(o,{clientOffset:ye(s)}),o.some(c=>this.monitor.canDropOnTarget(c))&&(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=s=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(s.dataTransfer)}},this.handleTopDragOver=s=>{const{dragOverTargetIds:o}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect="none");return}this.altKeyPressed=s.altKey,this.lastClientOffset=ye(s),this.scheduleHover(o),(o||[]).some(c=>this.monitor.canDropOnTarget(c))?(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?s.preventDefault():(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=s=>{this.isDraggingNativeItem()&&s.preventDefault(),this.enterLeaveCounter.leave(s.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=s=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var o;s.preventDefault(),(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(s.dataTransfer)}else Ke(s.dataTransfer)&&s.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=s=>{const{dropTargetIds:o}=this;this.dropTargetIds=[],this.actions.hover(o,{clientOffset:ye(s)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=s=>{const o=s.target;typeof o.dragDrop=="function"&&(o.tagName==="INPUT"||o.tagName==="SELECT"||o.tagName==="TEXTAREA"||o.isContentEditable||(s.preventDefault(),o.dragDrop()))},this.options=new to(r,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new Qs(this.isNodeInDocument)}}let be;function so(){return be||(be=new Image,be.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),be}const oo=function(e,r,n){return new no(e,r,n)};function Mt({isPremovedPiece:t=!1,piece:e,square:r,squares:n}){const{animationDuration:s,arePiecesDraggable:o,boardWidth:a,boardOrientation:c,chessPieces:u,currentPosition:f,deletePieceFromSquare:v,dropOffBoardAction:m,id:h,isDraggablePiece:d,isWaitingForAnimation:g,onPieceClick:p,onPieceDragBegin:y,onPieceDragEnd:D,onPieceDropOffBoard:O,onPromotionCheck:S,positionDifferences:T}=W(),[A,j]=l.useState({opacity:1,zIndex:5,touchAction:"none",cursor:o&&d({piece:e,sourceSquare:r})?"-webkit-grab":"default"}),[{canDrag:Q,isDragging:Y},U,re]=Ps(()=>({type:"piece",item:()=>(y(e,r),{piece:e,square:r,id:h}),end:(V,M)=>{D(e,r),!M.didDrop()&&(m==="trash"&&v(r),O?.(r,e))},collect:V=>({canDrag:d({piece:e,sourceSquare:r}),isDragging:!!V.isDragging()})}),[e,r,f,h]);re(so(),{captureDraggingState:!0}),l.useEffect(()=>{j(V=>Object.assign(Object.assign({},V),{opacity:Y?0:1}))},[Y]),l.useEffect(()=>{var V;const M=(V=T.removed)===null||V===void 0?void 0:V[r];if(!T.added||!M)return;const K=Object.entries(T.added).find(([F,_])=>_===M||S(r,F,M));if(g&&M&&K&&!t){const F=r,_=K[0];if(F&&_){const H=a/8;j(ne=>Object.assign(Object.assign({},ne),{transform:`translate(${(c==="black"?-1:1)*(_.charCodeAt(0)-F.charCodeAt(0))*H}px, ${(c==="black"?-1:1)*(Number(F[1])-Number(_[1]))*H}px)`,transition:`transform ${s}ms`,zIndex:6}))}}},[T]),l.useEffect(()=>{const{sourceSq:V}=$();V&&j(M=>Object.assign(Object.assign({},M),{transform:"translate(0px, 0px)",transition:"transform 0ms"}))},[f]),l.useEffect(()=>{j(V=>Object.assign(Object.assign({},V),{cursor:o&&d({piece:e,sourceSquare:r})?"-webkit-grab":"default"}))},[r,f,o]);function $(){return{sourceSq:n[r]}}return i.jsx("div",Object.assign({ref:o&&Q?U:null,onClick:()=>p(e,r),"data-piece":e,style:A},{children:typeof u[e]=="function"?u[e]({squareWidth:a/8,isDragging:Y,square:r}):i.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:a/8,height:a/8,style:{display:"block"}},{children:i.jsx("g",{children:u[e]})}))}))}function io({square:t,squareColor:e,setSquares:r,squareHasPremove:n,children:s}){const o=l.useRef(null),{autoPromoteToQueen:a,boardWidth:c,boardOrientation:u,clearArrows:f,currentPosition:v,currentRightClickDown:m,customBoardStyle:h,customDarkSquareStyle:d,customDropSquareStyle:g,customLightSquareStyle:p,customPremoveDarkSquareStyle:y,customPremoveLightSquareStyle:D,customSquare:O,customSquareStyles:S,drawNewArrow:T,handleSetPosition:A,handleSparePieceDrop:j,isWaitingForAnimation:Q,lastPieceColour:Y,lastSquareDraggedOver:U,onArrowDrawEnd:re,onDragOverSquare:$,onMouseOutSquare:V,onMouseOverSquare:M,onPieceDrop:K,onPromotionCheck:F,onRightClickDown:_,onRightClickUp:H,onSquareClick:ne,setLastSquareDraggedOver:Ve,setPromoteFromSquare:Ae,setPromoteToSquare:de,setShowPromoteDialog:Ie}=W(),[{isOver:je},se]=Gs(()=>({accept:"piece",drop:Me,collect:C=>({isOver:!!C.isOver()})}),[t,v,K,Q,Y]);function Me(C){if(C.isSpare){j(C.piece,t);return}F(C.square,t,C.piece)?a?A(C.square,t,C.piece[0]==="w"?"wQ":"bQ"):(Ae(C.square),de(t),Ie(!0)):A(C.square,t,C.piece,!0)}l.useEffect(()=>{if(o.current){const{x:C,y:B}=o.current.getBoundingClientRect();r(J=>Object.assign(Object.assign({},J),{[t]:{x:C,y:B}}))}},[c,u]);const oe=Object.assign(Object.assign(Object.assign(Object.assign({},ao(t,u,h)),e==="black"?d:p),n&&(e==="black"?y:D)),je&&g);return i.jsx("div",Object.assign({ref:se,style:oe,"data-square-color":e,"data-square":t,onTouchMove:C=>{var B;const J=C.touches[0],ie=document.elementsFromPoint(J.clientX,J.clientY),I=(B=ie?.find(L=>L.getAttribute("data-square")))===null||B===void 0?void 0:B.getAttribute("data-square");I&&I!==U&&(Ve(I),$(I))},onMouseOver:C=>{C.buttons===2&&m&&T(m,t),!(C.relatedTarget&&C.currentTarget.contains(C.relatedTarget))&&M(t)},onMouseOut:C=>{C.relatedTarget&&C.currentTarget.contains(C.relatedTarget)||V(t)},onMouseDown:C=>{C.button===2&&_(t)},onMouseUp:C=>{C.button===2&&(m&&re(m,t),H(t))},onDragEnter:()=>$(t),onClick:()=>{const C=v[t];ne(t,C),f()},onContextMenu:C=>{C.preventDefault()}},{children:typeof O=="string"?i.jsx(O,Object.assign({ref:o,style:Object.assign(Object.assign(Object.assign({},kt(c)),Lt),!n&&S?.[t])},{children:s})):i.jsx(O,Object.assign({ref:o,square:t,squareColor:e,style:Object.assign(Object.assign(Object.assign({},kt(c)),Lt),!n&&S?.[t])},{children:s}))}))}const Lt={display:"flex",justifyContent:"center"},kt=t=>({width:t/8,height:t/8}),ao=(t,e,r)=>r?.borderRadius?t==="a1"?e==="white"?{borderBottomLeftRadius:r.borderRadius}:{borderTopRightRadius:r.borderRadius}:t==="a8"?e==="white"?{borderTopLeftRadius:r.borderRadius}:{borderBottomRightRadius:r.borderRadius}:t==="h1"?e==="white"?{borderBottomRightRadius:r.borderRadius}:{borderTopLeftRadius:r.borderRadius}:t==="h8"?e==="white"?{borderTopRightRadius:r.borderRadius}:{borderBottomLeftRadius:r.borderRadius}:{}:{};function co(){const[t,e]=l.useState({}),{arePremovesAllowed:r,boardOrientation:n,boardWidth:s,currentPosition:o,id:a,premoves:c,showBoardNotation:u}=W(),f=l.useMemo(()=>{const v=[];return r?(c.forEach((m,h)=>{const{sourceSq:d,targetSq:g,piece:p}=m,y=v.find(D=>{var O;return D.piece===p&&((O=D.premovesRoute.at(-1))===null||O===void 0?void 0:O.targetSq)===d});y?y.premovesRoute.push({sourceSq:d,targetSq:g,index:h}):v.push({piece:p,premovesRoute:[{sourceSq:d,targetSq:g,index:h}]})}),v):[]},[c]);return i.jsx("div",Object.assign({"data-boardid":a},{children:[...Array(8)].map((v,m)=>i.jsx("div",Object.assign({style:{display:"flex",flexWrap:"nowrap",width:s}},{children:[...Array(8)].map((h,d)=>{const g=n==="black"?le[7-d]+(m+1):le[d]+(8-m),p=d%2===m%2?"white":"black",y=c.find(O=>O.sourceSq===g||O.targetSq===g),D=f.filter(({premovesRoute:O})=>{var S;return((S=O.at(-1))===null||S===void 0?void 0:S.targetSq)===g}).sort((O,S)=>{var T,A;return((T=S.premovesRoute.at(-1))===null||T===void 0?void 0:T.index)-((A=O.premovesRoute.at(-1))===null||A===void 0?void 0:A.index)}).at(0);return i.jsxs(io,Object.assign({square:g,squareColor:p,setSquares:e,squareHasPremove:!!y},{children:[!y&&o[g]&&i.jsx(Mt,{piece:o[g],square:g,squares:t}),D&&i.jsx(Mt,{isPremovedPiece:!0,piece:D.piece,square:g,squares:t}),u&&i.jsx(Kr,{row:m,col:d})]}),`${d}${m}`)})}),m.toString()))}))}const uo=()=>{const{arrows:t,newArrow:e,boardOrientation:r,boardWidth:n,customArrowColor:s}=W(),o=[...t,e].filter(Boolean);return i.jsx("svg",Object.assign({width:n,height:n,style:{position:"absolute",top:"0",left:"0",pointerEvents:"none",zIndex:"10"}},{children:o.map((a,c)=>{const[u,f,v]=a;if(u===f)return null;const m=Xe(r,n,u),h=Xe(r,n,f);let d=n/32;const g=c===t.length;t.some(S=>S[0]!==u&&S[1]===f)&&!g&&(d=n/16);const p=h.x-m.x,y=h.y-m.y,D=Math.hypot(y,p),O={x:m.x+p*(D-d)/D,y:m.y+y*(D-d)/D};return i.jsxs(l.Fragment,{children:[i.jsx("marker",Object.assign({id:`arrowhead-${c}`,markerWidth:"2",markerHeight:"2.5",refX:"1.25",refY:"1.25",orient:"auto"},{children:i.jsx("polygon",{points:"0.3 0, 2 1.25, 0.3 2.5",fill:v??s})})),i.jsx("line",{x1:m.x,y1:m.y,x2:O.x,y2:O.y,opacity:g?"0.5":"0.65",stroke:v??s,strokeWidth:g?.9*n/40:n/40,markerEnd:`url(#arrowhead-${c})`})]},`${u}-${f}${g?"-active":""}`)})}))};function lo({option:t}){const[e,r]=l.useState(!1),{boardWidth:n,chessPieces:s,customDarkSquareStyle:o,customLightSquareStyle:a,handleSetPosition:c,onPromotionPieceSelect:u,promoteFromSquare:f,promoteToSquare:v,promotionDialogVariant:m}=W(),h=()=>{switch(t[1]){case"Q":return o.backgroundColor;case"R":return a.backgroundColor;case"N":return m==="default"?a.backgroundColor:o.backgroundColor;case"B":return m==="default"?o.backgroundColor:a.backgroundColor}};return i.jsx("div",Object.assign({onClick:()=>{u(t,f??void 0,v??void 0)&&c(f,v,t,!0)},onMouseOver:()=>r(!0),onMouseOut:()=>r(!1),"data-piece":t,style:{cursor:"pointer",backgroundColor:e?h():`${h()}aa`,borderRadius:"4px",transition:"all 0.1s ease-out"}},{children:typeof s[t]=="function"?i.jsx("div",Object.assign({style:{transition:"all 0.1s ease-out",transform:e?"scale(1)":"scale(0.85)"}},{children:s[t]({squareWidth:n/8,isDragging:!1})})):i.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:n/8,height:n/8,style:{transition:"all 0.1s ease-out",transform:e?"scale(1)":"scale(0.85)"}},{children:i.jsx("g",{children:s[t]})}))}))}function fo(){const{boardOrientation:t,boardWidth:e,promotionDialogVariant:r,promoteToSquare:n}=W(),s=n?.[1]==="1"?"b":"w",o=[`${s??"w"}Q`,`${s??"w"}R`,`${s??"w"}N`,`${s??"w"}B`],a={default:{display:"grid",gridTemplateColumns:"1fr 1fr",transform:`translate(${-e/8}px, ${-e/8}px)`},vertical:{transform:`translate(${-e/16}px, ${-e/16}px)`},modal:{display:"flex",justifyContent:"center",alignItems:"center",transform:`translate(0px, ${3*e/8}px)`,width:"100%",height:`${e/4}px`,top:0,backgroundColor:"white",left:0}},c=Xe(t,e,n||"a8");return i.jsx("div",Object.assign({style:Object.assign({position:"absolute",top:`${c?.y}px`,left:`${c?.x}px`,zIndex:1e3},a[r]),title:"Choose promotion piece"},{children:o.map(u=>i.jsx(lo,{option:u},u))}))}const go={whiteKing:i.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"crisp-edges"},viewBox:"0 0 4210 12970",x:"0px",y:"0px",fillRule:"evenodd",clipRule:"evenodd",width:"250",height:"250"},{children:i.jsx("g",{children:i.jsx("path",{style:{fill:"black",fillRule:"nonzero"},d:"M2105 0c169,0 286,160 249,315l200 0c-172,266 -231,479 -256,792 315,-24 530,-86 792,-255l0 897c-265,-171 -479,-231 -792,-256 18,234 75,495 185,682l339 0c233,0 369,269 225,456l545 0 -595 1916c130,94 158,275 59,402 465,0 416,568 51,568l-334 0 465 2867 332 0c250,0 381,306 199,485 162,63 273,220 273,399l0 633 168 0 0 475c-1403,0 -2807,0 -4210,0l0 -475 167 0 0 -633c0,-179 112,-336 274,-399 -181,-178 -52,-485 199,-485l332 0 465 -2867 -335 0c-353,0 -418,-568 51,-568 -98,-127 -70,-308 59,-402l-594 -1916c181,0 363,0 545,0 -144,-187 -9,-456 225,-456l339 0c110,-187 167,-448 185,-682 -315,25 -530,87 -793,256l0 -897c266,171 480,231 793,255 -25,-315 -87,-529 -256,-792l199 0c-36,-155 81,-315 250,-315zm-1994 10012l0 253 3988 0 0 -253c-1330,0 -2659,0 -3988,0zm484 -1060c-174,0 -316,142 -316,316l0 633 3652 0 0 -633c0,-174 -142,-316 -316,-316 -1007,0 -2013,0 -3020,0zm45 -457c-230,0 -225,345 0,345l2930 0c230,0 225,-345 0,-345 -977,0 -1953,0 -2930,0zm2020 -2978l-1111 0 -465 2867 2041 0 -465 -2867zm-1558 -456c-229,0 -224,345 0,345 669,0 1337,0 2005,0 230,0 225,-345 0,-345 -668,0 -1336,0 -2005,0zm1730 -457l-1454 0c-229,0 -224,345 0,345l1454 0c229,0 224,-345 0,-345zm-2064 -1862l544 1751c529,0 1057,0 1586,0l544 -1751c-892,0 -1783,0 -2674,0zm1085 -567l504 0c-126,-247 -163,-526 -177,-800 273,15 553,52 800,177l0 -504c-247,126 -527,163 -800,177 14,-273 51,-552 177,-799 -168,0 -336,0 -504,0 125,247 162,526 177,799 -274,-14 -553,-51 -800,-177l0 504c247,-125 527,-162 800,-177 -15,274 -52,553 -177,800zm969 111l-1434 0c-230,0 -225,345 0,345l1434 0c230,0 225,-345 0,-345zm-717 -2175c-105,0 -175,109 -133,204l266 0c42,-96 -30,-205 -133,-204z"})})}))};function ho({children:t}){try{return i.jsx(i.Fragment,{children:t})}catch(e){return console.log(e),i.jsx(nr,{showError:!0})}}function nr({showError:t=!1}){return i.jsxs("div",Object.assign({style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},{children:[i.jsx("div",Object.assign({style:{width:250,height:250,transform:"rotate(90deg)"}},{children:go.whiteKing})),t&&i.jsx("h1",{children:"Something went wrong"})]}))}function po(){const t=l.useRef(null),{boardWidth:e,clearCurrentRightClickDown:r,onPromotionPieceSelect:n,setShowPromoteDialog:s,showPromoteDialog:o,customBoardStyle:a}=W();return l.useEffect(()=>{function c(u){t.current&&!t.current.contains(u.target)&&r()}return document.addEventListener("mouseup",c),()=>{document.removeEventListener("mouseup",c)}},[]),e?i.jsx("div",Object.assign({style:{perspective:"1000px"}},{children:i.jsxs("div",Object.assign({ref:t,style:Object.assign(Object.assign({position:"relative"},vo(e)),a)},{children:[i.jsx(co,{}),i.jsx(uo,{}),o&&i.jsxs(i.Fragment,{children:[i.jsx("div",{onClick:()=>{s(!1),n?.()},style:{position:"absolute",top:"0",left:"0",zIndex:"100",backgroundColor:"rgba(22,21,18,.7)",width:e,height:e}}),i.jsx(fo,{})]})]}))})):i.jsx(nr,{})}const vo=t=>({cursor:"default",height:t,width:t});var q;(function(t){t.mouse="mouse",t.touch="touch",t.keyboard="keyboard"})(q||(q={}));class mo{get delay(){var e;return(e=this.args.delay)!==null&&e!==void 0?e:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var e;return(e=this.args.ignoreContextMenu)!==null&&e!==void 0?e:!1}get enableHoverOutsideTarget(){var e;return(e=this.args.enableHoverOutsideTarget)!==null&&e!==void 0?e:!1}get enableKeyboardEvents(){var e;return(e=this.args.enableKeyboardEvents)!==null&&e!==void 0?e:!1}get enableMouseEvents(){var e;return(e=this.args.enableMouseEvents)!==null&&e!==void 0?e:!1}get enableTouchEvents(){var e;return(e=this.args.enableTouchEvents)!==null&&e!==void 0?e:!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var e,r,n,s;return(s=(n=(e=this.args)===null||e===void 0?void 0:e.delayTouchStart)!==null&&n!==void 0?n:(r=this.args)===null||r===void 0?void 0:r.delay)!==null&&s!==void 0?s:0}get delayMouseStart(){var e,r,n,s;return(s=(n=(e=this.args)===null||e===void 0?void 0:e.delayMouseStart)!==null&&n!==void 0?n:(r=this.args)===null||r===void 0?void 0:r.delay)!==null&&s!==void 0?s:0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window<"u")return window}get document(){var e;if(!((e=this.context)===null||e===void 0)&&e.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){var e;return((e=this.args)===null||e===void 0?void 0:e.rootElement)||this.document}constructor(e,r){this.args=e,this.context=r}}function yo(t,e,r,n){return Math.sqrt(Math.pow(Math.abs(r-t),2)+Math.pow(Math.abs(n-e),2))}function bo(t,e,r,n,s){if(!s)return!1;const o=Math.atan2(n-e,r-t)*180/Math.PI+180;for(let a=0;a<s.length;++a){const c=s[a];if(c&&(c.start==null||o>=c.start)&&(c.end==null||o<=c.end))return!0}return!1}const Oo={Left:1},Do={Left:0};function Ze(t){return t.button===void 0||t.button===Do.Left}function So(t){return t.buttons===void 0||(t.buttons&Oo.Left)===0}function sr(t){return!!t.targetTouches}const Co=1;function wo(t){const e=t.nodeType===Co?t:t.parentElement;if(!e)return;const{top:r,left:n}=e.getBoundingClientRect();return{x:n,y:r}}function To(t,e){if(t.targetTouches.length===1)return Se(t.targetTouches[0]);if(e&&t.touches.length===1&&t.touches[0].target===e.target)return Se(t.touches[0])}function Se(t,e){return sr(t)?To(t,e):{x:t.clientX,y:t.clientY}}const Pt=(()=>{let t=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get(){return t=!0,!0}}))}catch{}return t})(),ae={[q.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[q.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[q.keyboard]:{keydown:"keydown"}};class ue{profile(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((e=this.dragOverTargetIds)===null||e===void 0?void 0:e.length)||0}}get document(){return this.options.document}setup(){const e=this.options.rootElement;e&&(b(!ue.isSetUp,"Cannot have two Touch backends at the same time."),ue.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}teardown(){const e=this.options.rootElement;e&&(ue.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,r,n,s=!1){const o=Pt?{capture:s,passive:!1}:s;this.listenerTypes.forEach(function(a){const c=ae[a][r];c&&e.addEventListener(c,n,o)})}removeEventListener(e,r,n,s=!1){const o=Pt?{capture:s,passive:!1}:s;this.listenerTypes.forEach(function(a){const c=ae[a][r];c&&e.removeEventListener(c,n,o)})}connectDragSource(e,r){const n=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,r),this.addEventListener(r,"start",n),()=>{this.sourceNodes.delete(e),this.removeEventListener(r,"start",n)}}connectDragPreview(e,r,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,r),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,r){const n=this.options.rootElement;if(!this.document||!n)return()=>{};const s=o=>{if(!this.document||!n||!this.monitor.isDragging())return;let a;switch(o.type){case ae.mouse.move:a={x:o.clientX,y:o.clientY};break;case ae.touch.move:var c,u;a={x:((c=o.touches[0])===null||c===void 0?void 0:c.clientX)||0,y:((u=o.touches[0])===null||u===void 0?void 0:u.clientY)||0};break}const f=a!=null?this.document.elementFromPoint(a.x,a.y):void 0,v=f&&r.contains(f);if(f===r||v)return this.handleMove(o,e)};return this.addEventListener(this.document.body,"move",s),this.targetNodes.set(e,r),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,"move",s))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!e||!e.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,r,n){this.getSourceClientOffset=s=>{const o=this.sourceNodes.get(s);return o&&wo(o)},this.handleTopMoveStartCapture=s=>{Ze(s)&&(this.moveStartSourceIds=[])},this.handleMoveStart=s=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(s)},this.handleTopMoveStart=s=>{if(!Ze(s))return;const o=Se(s);o&&(sr(s)&&(this.lastTargetTouchFallback=s.targetTouches[0]),this._mouseClientOffset=o),this.waitingForDelay=!1},this.handleTopMoveStartDelay=s=>{if(!Ze(s))return;const o=s.type===ae.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,s),o),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(s,o)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(o)},this.handleTopMove=s=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;const{moveStartSourceIds:o,dragOverTargetIds:a}=this,c=this.options.enableHoverOutsideTarget,u=Se(s,this.lastTargetTouchFallback);if(!u)return;if(this._isScrolling||!this.monitor.isDragging()&&bo(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,u.x,u.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&o&&yo(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,u.x,u.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(o,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;const f=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(f),this.actions.publishDragSource(),s.cancelable&&s.preventDefault();const v=(a||[]).map(g=>this.targetNodes.get(g)).filter(g=>!!g),m=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(u.x,u.y,v):this.document.elementsFromPoint(u.x,u.y),h=[];for(const g in m){if(!m.hasOwnProperty(g))continue;let p=m[g];for(p!=null&&h.push(p);p;)p=p.parentElement,p&&h.indexOf(p)===-1&&h.push(p)}const d=h.filter(g=>v.indexOf(g)>-1).map(g=>this._getDropTargetId(g)).filter(g=>!!g).filter((g,p,y)=>y.indexOf(g)===p);if(c)for(const g in this.targetNodes){const p=this.targetNodes.get(g);if(f&&p&&p.contains(f)&&d.indexOf(g)===-1){d.unshift(g);break}}d.reverse(),this.actions.hover(d,{clientOffset:u})},this._getDropTargetId=s=>{const o=this.targetNodes.keys();let a=o.next();for(;a.done===!1;){const c=a.value;if(s===this.targetNodes.get(c))return c;a=o.next()}},this.handleTopMoveEndCapture=s=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,!!So(s)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}s.cancelable&&s.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=s=>{s.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new mo(n,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(q.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(q.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(q.keyboard)}}const xo=function(e,r={},n={}){return new ue(e,r,n)},Eo=l.createContext({isCustomDndProviderSet:!1}),Vo=({children:t})=>i.jsx(i.Fragment,{children:t}),Ao=({customDndBackend:t,customDndBackendOptions:e,children:r})=>{const[n,s]=l.useState(),[o,a]=l.useState(!1),[c,u]=l.useState(!1),{isCustomDndProviderSet:f}=l.useContext(Eo);l.useEffect(()=>{u("ontouchstart"in window),a(!0),s(window)},[]);const v=f?Vo:gs;return o?n?i.jsx(v,Object.assign({backend:t||(c?xo:oo),context:n,options:t?e:void 0},{children:r})):i.jsx(i.Fragment,{children:r}):null};function Io({boardContainer:t}){const{boardWidth:e,chessPieces:r,id:n,snapToCursor:s,allowDragOutsideBoard:o}=W(),a=Rs(h=>({item:h.getItem(),clientOffset:h.getClientOffset(),sourceClientOffset:h.getSourceClientOffset(),isDragging:h.isDragging()})),{isDragging:c,item:u,clientOffset:f,sourceClientOffset:v}=a,m=l.useCallback((h,d)=>{if(!h||!d)return{display:"none"};let{x:g,y:p}=s?h:d;const y=e/8/2;if(s&&(g-=y,p-=y),!o){const{left:O,top:S}=t,T=O-y,A=S-y,j=O+e-y,Q=S+e-y;g=Math.max(T,Math.min(g,j)),p=Math.max(A,Math.min(p,Q))}const D=`translate(${g}px, ${p}px)`;return{transform:D,WebkitTransform:D,touchAction:"none"}},[e,o,s,t]);return c&&u.id===n?i.jsx("div",Object.assign({style:{position:"fixed",pointerEvents:"none",zIndex:10,left:0,top:0}},{children:i.jsx("div",Object.assign({style:m(f,v)},{children:typeof r[u.piece]=="function"?r[u.piece]({squareWidth:e/8,isDragging:!0}):i.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:e/8,height:e/8},{children:i.jsx("g",{children:r[u.piece]})}))}))})):null}const No=l.forwardRef((t,e)=>{const{customDndBackend:r,customDndBackendOptions:n,onBoardWidthChange:s}=t,o=Nr(t,["customDndBackend","customDndBackendOptions","onBoardWidthChange"]),[a,c]=l.useState(t.boardWidth),u=l.useRef(null),f=l.useRef(null),[v,m]=l.useState({left:0,top:0}),h=l.useMemo(()=>{var d;return(d=u.current)===null||d===void 0?void 0:d.getBoundingClientRect()},[u.current]);return l.useEffect(()=>{a&&s?.(a)},[a]),l.useEffect(()=>{m({left:h?.left?h?.left:0,top:h?.top?h?.top:0})},[h]),l.useEffect(()=>{var d;if(t.boardWidth===void 0&&(!((d=u.current)===null||d===void 0)&&d.offsetWidth)){const g=new ResizeObserver(()=>{var p;c((p=u.current)===null||p===void 0?void 0:p.offsetWidth)});return g.observe(u.current),()=>{g.disconnect()}}},[u.current]),i.jsx(ho,{children:i.jsxs("div",Object.assign({ref:f,style:{display:"flex",flexDirection:"column",width:"100%"}},{children:[i.jsx("div",{ref:u,style:{width:"100%"}}),i.jsx(Ao,Object.assign({customDndBackend:r,customDndBackendOptions:n},{children:a&&i.jsxs(Yr,Object.assign({boardWidth:a},o,{ref:e},{children:[i.jsx(Io,{boardContainer:v}),i.jsx(po,{})]}))}))]}))})}),Ho=(t,e)=>t.flags.includes("c")?"capture":e.isCheckmate()?"checkmate":e.inCheck()?"check":"move",jo=t=>(t==="w"?"Black":"White")+" "+Ar.CHECKMATE_MESSAGE,Fo=t=>t.isCheckmate()?{isGameOver:!0,gameResult:jo(t.turn())}:t.isDraw()?{isGameOver:!0,gameResult:"Game Drawn!"}:{isGameOver:!1,gameResult:""},_o=(t,e)=>{for(let r=0;r<8;r++)for(let n=0;n<8;n++){const s=t[r][n];if(s&&s.type==="k"&&s.color===e)return{rank:r,file:n}}return null},Bo=t=>t?{[t.from]:{backgroundColor:"var(--last-move-from)"},[t.to]:{backgroundColor:"var(--last-move-to)"}}:null;export{No as C,Lo as P,Ho as a,Po as b,Fo as c,_o as d,Bo as g,ko as p};
